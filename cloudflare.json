{
  "version": 1,
  "env": {
    "account_id": "YOUR_ACCOUNT_ID",
    "api_token": "YOUR_API_TOKEN"
  },
  "rules": [
    {
      "zone": "ipablo.dev",
      "rules": [
        {
          "action": "set_cache_ttl_by_status",
          "description": "Cache assets por 1 ano",
          "enabled": true,
          "expression": "(cf.cache_status == \"MISS\" OR cf.cache_status == \"EXPIRED\") AND (http.request.uri.path ~ \"^/assets/.*\" AND (ends_with(http.request.uri.path, \".js\") OR ends_with(http.request.uri.path, \".css\") OR ends_with(http.request.uri.path, \".webp\") OR ends_with(http.request.uri.path, \".png\") OR ends_with(http.request.uri.path, \".jpg\")))",
          "action_parameters": {
            "cache_ttl": 31536000
          }
        },
        {
          "action": "set_cache_ttl_by_status",
          "description": "Cache HTML por 1 hora",
          "enabled": true,
          "expression": "ends_with(http.request.uri.path, \".html\") OR http.request.uri.path == \"/\"",
          "action_parameters": {
            "cache_ttl": 3600
          }
        },
        {
          "action": "set_response_header",
          "description": "Cache Control para assets (1 ano)",
          "enabled": true,
          "expression": "http.request.uri.path ~ \"^/assets/.*\" AND (ends_with(http.request.uri.path, \".js\") OR ends_with(http.request.uri.path, \".css\") OR ends_with(http.request.uri.path, \".webp\") OR ends_with(http.request.uri.path, \".png\") OR ends_with(http.request.uri.path, \".jpg\"))",
          "action_parameters": {
            "headers": {
              "Cache-Control": "public, max-age=31536000, immutable"
            }
          }
        },
        {
          "action": "set_response_header",
          "description": "Cache Control para HTML",
          "enabled": true,
          "expression": "ends_with(http.request.uri.path, \".html\") OR http.request.uri.path == \"/\"",
          "action_parameters": {
            "headers": {
              "Cache-Control": "public, max-age=3600, must-revalidate"
            }
          }
        }
      ]
    }
  ]
}
